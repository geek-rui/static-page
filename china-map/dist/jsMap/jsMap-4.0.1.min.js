/*!
 *  jsMap v4.0.1
 *  Copyright (C) 2018-2019, ZhaoGang
 *  Released under the MIT license.
 */
!function(d,m){"function"===typeof define&&define.amd?define(["jsmap"],m):"undefined"!==typeof module&&"object"===typeof exports?module.exports=m():d.jsMap=m()}("undefined"!==typeof window?window:this,function(){function d(b,c){return[].slice.call("object"===typeof b?b.length?b:[b]:(c||document).querySelectorAll(b))}function m(b,c){d(b).forEach(function(b){for(var a in c)b.style[a]=c[a]})}function q(b,c){d(b).forEach(function(b){for(var a in c)b.setAttribute(a,c[a])})}function k(b){return{}.toString.call(b).replace(/(\[object |\])/g,"").toLowerCase()}function w(b){for(var c in b)return!1;return!0}function x(b,c){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState){var a=e.status;(200<=a&&300>a||304===a)&&c(JSON.parse(e.responseText.trim()))}};e.open("GET",b);e.send(null)}function D(b){for(var c in r){var e=r[c];if("object"!==k(e))void 0===b[c]&&(b[c]=e);else for(var a in e)b[c]?void 0===b[c][a]&&(b[c][a]=e[a]):b[c]=e}return b}var A=!!(navigator.userAgent.toLowerCase().match(/(ios|iphone|ipod|ipad|android)/)&&"ontouchend"in document),B=window.document,t,p={};Object.getOwnPropertyDescriptor(Element.prototype,"classList")||HTMLElement&&Object.getOwnPropertyDescriptor(HTMLElement.prototype,"classList")&&Object.defineProperty(Element.prototype,"classList",Object.getOwnPropertyDescriptor(HTMLElement.prototype,"classList"));var r={taiwanJSON:!1,nanhaizhudaoJSON:!1,name:"china",width:900,stroke:{width:1,color:"#f3f3f3"},fill:{basicColor:"#3f99f9",hoverColor:"#0880ff",clickColor:"#006bde"},areaName:{show:!1,size:12,basicColor:"#333",clickColor:"#fff"},disabled:{color:"#bfbfbf",except:!1,name:[]},selected:[],hide:[],multiple:!1,tip:!0,hoverCallback:function(){},clickCallback:function(){}},u={version:"4.0.1",config:function(b,c,e){var a=D(e||{});if(c&&"object"===k(c))if("taiwan"!==a.name||a.taiwanJSON)if("nanhaizhudao"!==a.name||a.nanhaizhudaoJSON){e=c[a.name];var l="",h="",v=[],f;for(f in e){var g=e[f];v.push(f);l+='\r\n\t\t\t\t\t\x3cpath \r\n\t\t\t\t\t\td\x3d"'+g.svg+'" \r\n\t\t\t\t\t\tclass\x3d"jsmap-'+f+'" \r\n\t\t\t\t\t\tdata-name\x3d"'+g.name+'" \r\n\t\t\t\t\t\tdata-id\x3d"'+f+'" \r\n\t\t\t\t\t\tstyle\x3d"cursor:pointer;"\x3e\r\n\t\t\t\t\t\x3c/path\x3e\r\n\t\t\t\t';h+='\r\n\t\t\t\t\t\x3ctext \r\n\t\t\t\t\t\tx\x3d"'+g.textPosition[0]+'" \r\n\t\t\t\t\t\ty\x3d"'+g.textPosition[1]+'" \r\n\t\t\t\t\t\tclass\x3d"jsmap-'+f+'" \r\n\t\t\t\t\t\tdata-name\x3d"'+g.name+'" \r\n\t\t\t\t\t\tdata-id\x3d"'+f+'" \r\n\t\t\t\t\t\tstyle\x3d"cursor:pointer;"\x3e'+g.name+"\x3c/text\x3e\r\n\t\t\t\t"}a.areaName.show||(h="");l='\x3cdiv \r\n\t\t\t\tclass\x3d"jsmap-svg-container" \r\n\t\t\t\tstyle\x3d"\r\n\t\t\t\t\tposition:absolute;\r\n\t\t\t\t\ttop:0;\r\n\t\t\t\t\tleft:0;\r\n\t\t\t\t\tpadding:0;\r\n\t\t\t\t\tmargin:0;\r\n\t\t\t\t\ttransform-origin:center;\r\n\t\t\t\t\t-webkit-user-select:none;\r\n\t\t\t\t\t-moz-user-select:none;\r\n\t\t\t\t\t-ms-user-select:none;\r\n\t\t\t\t\tuser-select:none;\r\n\t\t\t\t\t-webkit-tap-highlight-color:transparent;"\r\n\t\t\t\t\x3e\r\n\t\t\t\t\x3csvg version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 575 470"\x3e'+l+h+"\x3c/svg\x3e\r\n\t\t\t\x3c/div\x3e";d(b).forEach(function(b){b.__jsmap_csscache__={width:b.style.width,height:b.style.height,padding:b.style.padding,position:b.style.position};"static"===window.getComputedStyle(b,null).getPropertyValue("position")&&(b.style.position="relative");b.classList.add("jsmap-container");var e;String(a.width).match(/^([1-9][0-9]{0,1}|100)%$/)?(a.width="100%",e=parseFloat(window.getComputedStyle(b,null).getPropertyValue("width"))/1.8+"px"):(a.width=parseInt(a.width)+"px",e=parseInt(a.width)/1.8+"px");m(b,{width:a.width,height:e,padding:0});b.innerHTML=l;b.__jsmap_jsondata__=c;b.__jsmap_options__=a;var h=d(".jsmap-svg-container",b)[0],f=d("svg",h)[0],g=d("path",f),n=d("text",f),p=d("path, text",f);m(h,{width:a.width,height:e});q(f,{width:"100%"===a.width?a.width:parseFloat(a.width),height:parseFloat(e)});m(f,{position:"relative",overflow:"hidden",marginLeft:"china"===a.name?700<window.innerWidth?"-50px":"-30px":0});n.length&&d(n).forEach(function(a){a.getAttribute("data-id").match(/(shanghai|xianggang|aomen|nanhaizhudao|tianjin|beijing)/)||(a.style.pointerEvents="none")});Array.isArray(a.hide)&&a.hide.length&&a.hide.forEach(function(a){d(p).forEach(function(b){if(b.getAttribute("data-id")===a||b.getAttribute("data-name")===a)b.style.display="none"})});e=a.fill.basicColor;"string"===typeof e&&q(g,{fill:e,"data-fill":e});if("object"===k(e)&&!w(e)){q(g,{fill:r.fill.basicColor,"data-fill":r.fill.basicColor});for(var u in e)h=e[u],q(d(".jsmap-"+u,f),{fill:h,"data-fill":h})}var x=window.setTimeout(function(){d(g).forEach(function(a){a.style.transition=".15s"});window.clearTimeout(x)},0);q(g,{stroke:a.stroke.color,"stroke-width":a.stroke.width});a.areaName.show&&q(n,{fill:a.areaName.basicColor,"font-size":a.areaName.size});n=a.disabled.name;if(Array.isArray(n)&&n.length){var C=function(b){d(b).forEach(function(b){b.classList.add("jsmap-disabled");b.style.cursor="not-allowed";"text"!==b.nodeName.toLowerCase()&&b.setAttribute("fill",a.disabled.color)})};if(a.disabled.except){var y=[];n.forEach(function(a){a.match(/[a-z]/)?y.push(a):d(g).forEach(function(b){b.getAttribute("data-name")===a&&y.push(b.getAttribute("data-id"))})});var z=v.map(function(a){return a});y.forEach(function(a){z.splice(z.indexOf(a),1)});z.forEach(function(a){C(d(".jsmap-"+a,b))})}else n.forEach(function(a){C(d(".jsmap-"+a,b))})}a.tip&&!d("#jsmap-tip-layer")[0]&&(document.body.insertAdjacentHTML("beforeend",'\x3cdiv \r\n\t\t\t\t\t\t\tid\x3d"jsmap-tip-layer" \r\n\t\t\t\t\t\t\tstyle\x3d"\r\n\t\t\t\t\t\t\t\tposition:absolute;\r\n\t\t\t\t\t\t\t\ttop:0;\r\n\t\t\t\t\t\t\t\tleft:0;\r\n\t\t\t\t\t\t\t\tz-index:999;\r\n\t\t\t\t\t\t\t\tdisplay:inline-block;\r\n\t\t\t\t\t\t\t\twidth:auto;\r\n\t\t\t\t\t\t\t\theight:auto;\r\n\t\t\t\t\t\t\t\toverflow:hidden;\r\n\t\t\t\t\t\t\t\tdisplay:none;\r\n\t\t\t\t\t\t\t"\r\n\t\t\t\t\t\t\x3e\x3c/div\x3e'),t=d("#jsmap-tip-layer")[0]);v.forEach(function(c){d(d(".jsmap-"+c,b)).forEach(function(c){c.addEventListener("mouseenter",function(){if(!A){var b=this;if(!b.classList.contains("jsmap-disabled")){if(!b.classList.contains("jsmap-clicked")){var c=v.map(function(a){return a});"string"===k(a.fill.hoverColor)&&"path"===b.nodeName.toLowerCase()&&b.setAttribute("fill",a.fill.hoverColor);if("object"===k(a.fill.hoverColor)&&!w(a.fill.hoverColor)){for(var e in a.fill.hoverColor){var d=a.fill.hoverColor[e];-1<b.getAttribute("class").indexOf("jsmap-"+e)&&b.setAttribute("fill",d);c.splice(c.indexOf(e),1)}c.forEach(function(a){-1<b.getAttribute("class").indexOf("jsmap-"+d)&&b.setAttribute("fill",r.fill.hoverColor)})}}a.hoverCallback(b.getAttribute("data-id"),b.getAttribute("data-name"));a.tip&&(!0===a.tip&&(t.innerHTML='\x3cdiv \r\n\t\t\t\t\t\t\t\t\t\tstyle\x3d"\r\n\t\t\t\t\t\t\t\t\t\t\tpadding:10px 12px;\r\n\t\t\t\t\t\t\t\t\t\t\tcolor:#fff;\r\n\t\t\t\t\t\t\t\t\t\t\tfont-size:14px;\r\n\t\t\t\t\t\t\t\t\t\t\ttext-align:center;\r\n\t\t\t\t\t\t\t\t\t\t\tborder-radius:4px;\r\n\t\t\t\t\t\t\t\t\t\t\tborder:#777 solid 1px;\r\n\t\t\t\t\t\t\t\t\t\t\tbackground:rgba(0,0,0,.75);"\r\n\t\t\t\t\t\t\t\t\t\x3e'+b.getAttribute("data-name")+"\x3c/div\x3e"),"function"===k(a.tip)&&(t.innerHTML=a.tip(b.getAttribute("data-id"),b.getAttribute("data-name"))),B.onmousemove=function(a){m(t,{transform:"translate3d("+(a.pageX+12+"px")+", "+(a.pageY+12+"px")+", 0)",display:"block"})})}}});c.addEventListener("mouseleave",function(){A||this.classList.contains("jsmap-disabled")||(this.classList.contains("jsmap-clicked")||"path"===this.nodeName.toLowerCase()&&this.setAttribute("fill",this.getAttribute("data-fill")),a.tip&&(t.innerHTML="",m(t,{transform:"translate3d(0, 0, 0)",display:"none"}),B.onmousemove=null))});c.addEventListener("click",function(){var c=this;if(!c.classList.contains("jsmap-disabled")){var e=c.getAttribute("data-id");if(!1!==a.fill.clickColor){var h=v.map(function(a){return a});"string"===typeof a.fill.clickColor&&"path"===c.nodeName.toLowerCase()&&c.setAttribute("fill",a.fill.clickColor);if("object"===k(a.fill.clickColor)&&!w(a.fill.clickColor)){for(var f in a.fill.clickColor){var l=a.fill.clickColor[f];-1<c.getAttribute("class").indexOf("jsmap-"+f)&&c.setAttribute("fill",l);h.splice(h.indexOf(f),1)}h.forEach(function(a){-1<c.getAttribute("class").indexOf("jsmap-"+a)&&c.setAttribute("fill",r.fill.clickColor)})}if(!1!==a.areaName.clickColor&&a.areaName.show){var g=d("text.jsmap-"+c.getAttribute("data-id"),b)[0];g.setAttribute("fill",a.areaName.clickColor);a.multiple||d(d("text",b)).forEach(function(b){b!==g&&b.setAttribute("fill",a.areaName.basicColor)})}a.multiple?(c.classList.toggle("jsmap-clicked"),c.classList.contains("jsmap-clicked")||c.setAttribute("fill",c.getAttribute("data-fill"))):(c.classList.add("jsmap-clicked"),d(p).forEach(function(a){a.classList.contains("jsmap-"+e)||a.classList.contains("jsmap-disabled")||(a.classList.remove("jsmap-clicked"),a.setAttribute("fill",a.getAttribute("data-fill")))}));a.clickCallback(c.getAttribute("data-id"),c.getAttribute("data-name"))}}})})});Array.isArray(a.selected)&&a.selected.length&&a.selected.forEach(function(a){a=d('path[data-id\x3d"'+a+'"], path[data-name\x3d"'+a+'"]',f)[0];var b=document.createEvent("MouseEvents");b.initEvent("click",!0,!0);a&&a.dispatchEvent(b)})})}else console.warn("\u6765\u81ea jsMap \u7684\u63d0\u793a\uff1a[ \u5f88\u62b1\u6b49\uff0c\u6682\u65e0\u5357\u6d77\u8bf8\u5c9b\u7684\u8be6\u7ec6\u5730\u56fe\u6570\u636e\u3002 ]");else console.warn("\u6765\u81ea jsMap \u7684\u63d0\u793a\uff1a[ \u5f88\u62b1\u6b49\uff0c\u6682\u65e0\u53f0\u6e7e\u7701\u7684\u8be6\u7ec6\u5730\u56fe\u6570\u636e\u3002 ]");else console.warn("\u6765\u81ea jsMap \u7684\u63d0\u793a\uff1a[ \u8bf7\u4f20\u5165\u5730\u56fe\u6570\u636e ]")},refresh:function(b){d(b).forEach(function(b){var c=b.__jsmap_jsondata__,a=b.__jsmap_options__;c&&a&&u.config(b,c,a)})},remove:function(b){d(b).forEach(function(b){var c=b.__jsmap_csscache__;if(c)for(var a in c){var d=c[a];d?b.style[a]=d:b.style.removeProperty(a)}b.classList.remove("jsmap-container");b.__jsmap_csscache__=null;b.__jsmap_jsondata__=null;b.__jsmap_options__=null;b.innerHTML=""})},getSelected:function(b,c){b=d(".jsmap-svg-container",d(b)[0])[0];b=d(".jsmap-clicked",b);c||(c={type:"array"});if(c){if("array"===c.type){var e=[],a=[];if(!b.length)return[[],[]];d(b).forEach(function(b){e.push(b.getAttribute("data-id"));a.push(b.getAttribute("data-name"))});return[e,a]}if("object"===c.type){var l={};if(!b.length)return l;d(b).forEach(function(a){l[a.getAttribute("data-id")]=a.getAttribute("data-name")});return l}}},getJSON:function(b,c){b&&x(b,function(b){"function"===k(c)&&c(b)})},preloadJSON:function(b,c){if("object"===k(b)&&!w(b)){var e=Object.keys(b).length,a=0,d;for(d in b)(function(b,d){x(d,function(d){p[b]=d;a++;a===e&&"function"===k(c)&&c(p)})})(d,b[d])}},getPreloadJSON:function(b){return b?p[b]:p}};!function c(d){Object.freeze(d);Object.keys(d).forEach(function(a){"object"===typeof d[a]&&c(d[a])})}(u);return u});